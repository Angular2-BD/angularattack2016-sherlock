<html>

<head>
  <script>document.write('<base href="' + document.location + '" />');</script>
    <title>Angular Attack App</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <!-- Material Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.purple-indigo.min.css" />

    <!-- 1. Load libraries -->
    <!-- Polyfill(s) for older browsers -->
    <script src="node_modules/es6-shim/es6-shim.min.js"></script>

    <script src="node_modules/zone.js/dist/zone.js"></script>
    <script src="node_modules/reflect-metadata/Reflect.js"></script>
    <script src="node_modules/systemjs/dist/system.src.js"></script>

    <!-- material lite -->
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <!--Firebase  -->
    <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>

    <!-- 2. Configure SystemJS -->
    <script src="systemjs.config.js"></script>
    <script>
        System.import('app').catch(function(err) {
            console.error(err);
        });
    </script>
</head>

<!-- 3. Display the application -->
<body id="appBody">
    <my-app>Loading...</my-app>
</body>

  <script type="text/javascript">

  // execute when "Connect With GitHub" pressed
  function connectWithGithub() {
      var ref = new Firebase("https://ng-github.firebaseio.com");
      ref.authWithOAuthPopup("github", function(error, authData) {
          if (error) {
              console.log("Login Failed!", error);
          } else {
              console.log("Authenticated successfully with payload:", authData);
              //set session username
              username = authData.github.username;
              sessionStorage.setItem('username',username);
              //set session security key
              // var key=Math.random()*Math.random()*1000;
              // key=Math.floor(key);
              // sessionStorage.setItem('key',key);
              //check in
              sessionStorage.setItem('login','true');
              window.location.reload();
          }
      });
  }

  </script>
</html>
