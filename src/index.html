<!DOCTYPE html>
<html>
<head>
    <base href="/"/>
    <link rel="icon" href="icon-min.png" type="image/png" sizes="16x16">
    <title>Github Bucket</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Get all the things you love from Github in one bucket | Your daily dose from Github">

    <!-- Material Lite -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.purple-indigo.min.css" />
    <!-- material lite -->
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <!--Firebase  -->
    <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
</head>

    <!-- 3. Display the application -->

    <body id="appBody">
        <my-app>Please wait while we fill your Github Bucket with the latest bits...</my-app>
    </body>

<script type="text/javascript">
    // execute when "Connect With GitHub" pressed
    function connectWithGithub() {
        var ref = new Firebase("https://github-bucket.firebaseio.com/");
        ref.authWithOAuthPopup("github", function(error, authData) {
            if (error) {
                console.log("Login Failed!", error);
            } else {
                console.log("Authenticated successfully with payload:", authData);
                //set session username
                username = authData.github.username;
                sessionStorage.setItem('username', username);
                sessionStorage.setItem('login', 'true');
                window.location.reload();
            }
        });
    }
</script>

</html>
